/*2013-06-14-*/window.JST=window.JST||{},window.JST["view/help-main"]=function(locals,filters,escape){function rethrow(a,b,c,d){var e=b.split("\n"),f=Math.max(d-3,0),g=Math.min(e.length,d+3),h=e.slice(f,g).map(function(a,b){var c=b+f+1;return(c==d?" >> ":"    ")+c+"| "+a}).join("\n");throw a.path=c,a.message=(c||"ejs")+":"+d+"\n"+h+"\n\n"+a.message,a}escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'<header>\r\n    <figure class="caption">开始游戏</figure>\r\n    <div class="close">\r\n    </div>\r\n</header>\r\n<div class="container">\r\n    <dt class="help-tip">\r\n        <dl>这是一个大家坐在一起的文字游戏！首先要集齐至少<strong>7</strong>个人用浏览器打开<em>www.wenzisha.com</em>其中一人点击出题按钮，其余人进入游戏准备抓鬼。</dl>\r\n    </dt>\r\n</div>\r\n\r\n<footer>\r\n    <div class="slider">\r\n        <div class="help-man">\r\n        </div>\r\n\r\n        <div class="slider-status">\r\n        <span class="sel"></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n    </div>\r\n        <div class="slider-outer">\r\n        <ul class="slider-wrap">\r\n            <li>\r\n                <img data-img="./image/1.png" src="./image/1.png">\r\n            </li>\r\n            <li>\r\n                <img data-img="./image/2.png" src="./image/1.png">\r\n            </li>\r\n            <li>\r\n                <img data-img="./image/3.png" src="./image/1.png">\r\n            </li>\r\n            <li>\r\n                <img data-img="./image/4.png" src="./image/1.png">\r\n            </li>\r\n            <li>\r\n                <img data-img="./image/5.png" src="./image/1.png">\r\n            </li>\r\n            <li>\r\n                <img data-img="./image/6.png" src="./image/1.png">\r\n            </li>\r\n            <li>\r\n                <img data-img="./image/7.png" src="./image/1.png">\r\n            </li>\r\n            <li>\r\n                <img data-img="./image/8.png" src="./image/1.png">\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    </div>\r\n</footer>',filename:"view/help-main.jst.ejs"};try{var buf=[];with(locals||{})!function(){buf.push('<header>\n    <figure class="caption">开始游戏</figure>\n    <div class="close">\n    </div>\n</header>\n<div class="container">\n    <dt class="help-tip">\n        <dl>这是一个大家坐在一起的文字游戏！首先要集齐至少<strong>7</strong>个人用浏览器打开<em>www.wenzisha.com</em>其中一人点击出题按钮，其余人进入游戏准备抓鬼。</dl>\n    </dt>\n</div>\n\n<footer>\n    <div class="slider">\n        <div class="help-man">\n        </div>\n\n        <div class="slider-status">\n        <span class="sel"></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n        <span></span>\n    </div>\n        <div class="slider-outer">\n        <ul class="slider-wrap">\n            <li>\n                <img data-img="./image/1.png" src="./image/1.png">\n            </li>\n            <li>\n                <img data-img="./image/2.png" src="./image/1.png">\n            </li>\n            <li>\n                <img data-img="./image/3.png" src="./image/1.png">\n            </li>\n            <li>\n                <img data-img="./image/4.png" src="./image/1.png">\n            </li>\n            <li>\n                <img data-img="./image/5.png" src="./image/1.png">\n            </li>\n            <li>\n                <img data-img="./image/6.png" src="./image/1.png">\n            </li>\n            <li>\n                <img data-img="./image/7.png" src="./image/1.png">\n            </li>\n            <li>\n                <img data-img="./image/8.png" src="./image/1.png">\n            </li>\n        </ul>\n    </div>\n    </div>\n</footer>')}();return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}},window.JST=window.JST||{},window.JST["view/help-switcher"]=function(locals,filters,escape){function rethrow(a,b,c,d){var e=b.split("\n"),f=Math.max(d-3,0),g=Math.min(e.length,d+3),h=e.slice(f,g).map(function(a,b){var c=b+f+1;return(c==d?" >> ":"    ")+c+"| "+a}).join("\n");throw a.path=c,a.message=(c||"ejs")+":"+d+"\n"+h+"\n\n"+a.message,a}escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'<% if(index == 1){ %>\r\n<dt class="help-tip">\r\n    <dl>这是一个大家坐在一起的文字游戏！首先要集齐至少<strong>7</strong>个人用浏览器打开<em>www.wenzisha.com</em>其中一人点击出题按钮，其余人进入游戏准备抓鬼。</dl>\r\n</dt>\r\n<% }else if(index == 2){ %>\r\n<dt class="help-tip">\r\n    <dl>法官进入出题界面,并将领卡密码告诉大家，其他人输入密码领取卡片。</dl>\r\n    <dl>法官出题需保证两个词<span>字数一致，强烈相关。</span></dl>\r\n</dt>\r\n<% }else if(index == 3){ %>\r\n<dt class="help-tip">\r\n    <dl>所有人确认好自己的身份卡</dl>\r\n</dt>\r\n<% }else if(index == 4){ %>\r\n<dt class="help-tip">\r\n    <dl>法官：天黑请闭眼，鬼请睁眼，鬼需要互相认识同伴，并指认开始阐述的起点。（通常以顺时针方向进行）</dl>\r\n</dt>\r\n<% }else if(index == 5){ %>\r\n<dt class="help-tip">\r\n    从鬼指认的人开始阐述，平民和傻子需要尽量阐述的让同伴理解你的词，但不要让鬼猜到你的词。\r\n</dt>\r\n<% }else if(index == 6){ %>\r\n<dt class="help-tip">\r\n    阐述一轮结束后，法官需要组织大家进行投票谁是鬼。票数最多的人被投死，如票数相同，则继续阐述再进行投票，直到投死一个人为止。\r\n</dt>\r\n<% }else if(index == 7){ %>\r\n<dt class="help-tip">\r\n    <dl>被投死的人，需要承认是否是鬼，如回答不是鬼，则没有遗言；</dl>\r\n    <dl>如回答是鬼，则可以向法官问一个可以用“是”或“否”作答的问题，法官将如实回答。</dl>\r\n</dt>\r\n<% }else if(index == 8){ %>\r\n<dt class="help-tip">\r\n    <dl>当鬼猜出词时，鬼胜；</dl>\r\n    <dl>当平民和傻子的人数少于鬼的人数时，鬼胜;</dl>\r\n    <dl>当平民和傻子将鬼全部投死，平民和傻子胜。</dl>\r\n</dt>\r\n<% }else{ %>\r\n<dt class="help-tip">\r\n    <dl>error</dl>\r\n</dt>\r\n<% } %>\r\n\r\n',filename:"view/help-switcher.jst.ejs"};try{var buf=[];with(locals||{})!function(){buf.push(""),__stack.lineno=1,1==index?(buf.push('\n<dt class="help-tip">\n    <dl>这是一个大家坐在一起的文字游戏！首先要集齐至少<strong>7</strong>个人用浏览器打开<em>www.wenzisha.com</em>其中一人点击出题按钮，其余人进入游戏准备抓鬼。</dl>\n</dt>\n'),__stack.lineno=5):2==index?(buf.push('\n<dt class="help-tip">\n    <dl>法官进入出题界面,并将领卡密码告诉大家，其他人输入密码领取卡片。</dl>\n    <dl>法官出题需保证两个词<span>字数一致，强烈相关。</span></dl>\n</dt>\n'),__stack.lineno=10):3==index?(buf.push('\n<dt class="help-tip">\n    <dl>所有人确认好自己的身份卡</dl>\n</dt>\n'),__stack.lineno=14):4==index?(buf.push('\n<dt class="help-tip">\n    <dl>法官：天黑请闭眼，鬼请睁眼，鬼需要互相认识同伴，并指认开始阐述的起点。（通常以顺时针方向进行）</dl>\n</dt>\n'),__stack.lineno=18):5==index?(buf.push('\n<dt class="help-tip">\n    从鬼指认的人开始阐述，平民和傻子需要尽量阐述的让同伴理解你的词，但不要让鬼猜到你的词。\n</dt>\n'),__stack.lineno=22):6==index?(buf.push('\n<dt class="help-tip">\n    阐述一轮结束后，法官需要组织大家进行投票谁是鬼。票数最多的人被投死，如票数相同，则继续阐述再进行投票，直到投死一个人为止。\n</dt>\n'),__stack.lineno=26):7==index?(buf.push('\n<dt class="help-tip">\n    <dl>被投死的人，需要承认是否是鬼，如回答不是鬼，则没有遗言；</dl>\n    <dl>如回答是鬼，则可以向法官问一个可以用“是”或“否”作答的问题，法官将如实回答。</dl>\n</dt>\n'),__stack.lineno=31):8==index?(buf.push('\n<dt class="help-tip">\n    <dl>当鬼猜出词时，鬼胜；</dl>\n    <dl>当平民和傻子的人数少于鬼的人数时，鬼胜;</dl>\n    <dl>当平民和傻子将鬼全部投死，平民和傻子胜。</dl>\n</dt>\n'),__stack.lineno=37):(buf.push('\n<dt class="help-tip">\n    <dl>error</dl>\n</dt>\n'),__stack.lineno=41),buf.push("\n\n")}();return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}},window.JST=window.JST||{},window.JST["view/helper-new"]=function(locals,filters,escape){function rethrow(a,b,c,d){var e=b.split("\n"),f=Math.max(d-3,0),g=Math.min(e.length,d+3),h=e.slice(f,g).map(function(a,b){var c=b+f+1;return(c==d?" >> ":"    ")+c+"| "+a}).join("\n");throw a.path=c,a.message=(c||"ejs")+":"+d+"\n"+h+"\n\n"+a.message,a}escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'\n<div class="sl-wrap">\n    \n    <div class="sl">\n        <div class="card one">\n            <h2>如何开始</h2>\n            <p class="cd-img"><img width="100" alt="qr-code" src="./image/qrcode.png" /></p>\n            <p class="cd-text">\n                这是大家坐在一起玩的桌游！首先，集齐至少 <em>7 个人</em>，大家用手机扫描二维码或用浏览器打开<em>www.wenzisha.com</em>进入游戏。\n            </p>\n        </div>\n        <div class="card two">\n            <h2>进入游戏</h2>\n            <p class="cd-text">\n            担当法官主持游戏的人点击“我是法官”按钮进入将得到一个房间密码，将其告诉其它游戏者；<br/><br/>\n\n所有游戏者点“加入游戏”并输入房间密码进入房间等候法官出题。\n\n            </p>\n        </div>\n        <div class="card three">\n            <h2>确认身份</h2>\n            <p class="cd-text">\n            等法官出题后，所有人查看自己的卡片确认自己的身份。<br/><br/>\n\n如果你得到一个<em>词语</em>，那你是平民或傻子；<br/>\n如果你得到一个<em>数字</em>，那你是鬼。\n            </p>\n        </div>\n        \n        <div class="card four">\n            <h2>天黑闭眼</h2>\n            <p class="cd-text">\n            所有人确认身份后，法官主持大家进入天黑闭眼的环节，并宣布鬼睁开双眼，来<em>确认同伴</em>，同时需要指出<em>阐述的起点</em>。（通常以顺时针方向进行阐述）\n            </p>\n        </div>\n        \n        <div class="card five">\n            <h2>依次阐述</h2>\n            <p class="cd-text">\n            法官宣布大家睁开双眼，由鬼指认的人开始进行词语的阐述。\n平民和傻子需要尽可能让同伴来知道自己不是鬼，但不能透露太多线索让鬼知道；<br/>\n鬼需要混淆视听，不让其它人发现自己是鬼，并积极地猜平民的词语。\n            </p>\n        </div>\n        \n        <div class="card six">\n            <h2>投票</h2>\n            <p class="cd-text">\n            进行完一轮的阐述后，法官需要组织大家进行对鬼的投票。<br/><br/>\n\n票数最多的人被投死，如果票数相同，可通过双方的再次阐述来进行投票，直到投死一人为止。\n            </p>\n        </div>\n        \n        <div class="card seven">\n            <h2>遗言</h2>\n            <p class="cd-text">\n                被投死的人需要承认是否是鬼，如回答不是鬼，则没有遗言；<br/><br/>\n\n如果回答是鬼，则可以向法官问一个可以用“是”或“否”回答的问题，法官将如实作答。\n            </p>\n        </div>\n        \n        <div class="card eight">\n            <h2>游戏结束</h2>\n            <p class="cd-text">\n                当鬼猜出词时，鬼胜；<br/><br/>\n\n当平民和傻子的人数少于鬼的人数时，鬼胜；<br/><br/>\n\n当鬼全部死亡时，平民和傻子胜。\n            </p>\n        </div>\n        \n    </div>\n</div>\n\n<a class="h-close"></a>',filename:"view/helper-new.jst.ejs"};try{var buf=[];with(locals||{})!function(){buf.push('\n<div class="sl-wrap">\n    \n    <div class="sl">\n        <div class="card one">\n            <h2>如何开始</h2>\n            <p class="cd-img"><img width="100" alt="qr-code" src="./image/qrcode.png" /></p>\n            <p class="cd-text">\n                这是大家坐在一起玩的桌游！首先，集齐至少 <em>7 个人</em>，大家用手机扫描二维码或用浏览器打开<em>www.wenzisha.com</em>进入游戏。\n            </p>\n        </div>\n        <div class="card two">\n            <h2>进入游戏</h2>\n            <p class="cd-text">\n            担当法官主持游戏的人点击“我是法官”按钮进入将得到一个房间密码，将其告诉其它游戏者；<br/><br/>\n\n所有游戏者点“加入游戏”并输入房间密码进入房间等候法官出题。\n\n            </p>\n        </div>\n        <div class="card three">\n            <h2>确认身份</h2>\n            <p class="cd-text">\n            等法官出题后，所有人查看自己的卡片确认自己的身份。<br/><br/>\n\n如果你得到一个<em>词语</em>，那你是平民或傻子；<br/>\n如果你得到一个<em>数字</em>，那你是鬼。\n            </p>\n        </div>\n        \n        <div class="card four">\n            <h2>天黑闭眼</h2>\n            <p class="cd-text">\n            所有人确认身份后，法官主持大家进入天黑闭眼的环节，并宣布鬼睁开双眼，来<em>确认同伴</em>，同时需要指出<em>阐述的起点</em>。（通常以顺时针方向进行阐述）\n            </p>\n        </div>\n        \n        <div class="card five">\n            <h2>依次阐述</h2>\n            <p class="cd-text">\n            法官宣布大家睁开双眼，由鬼指认的人开始进行词语的阐述。\n平民和傻子需要尽可能让同伴来知道自己不是鬼，但不能透露太多线索让鬼知道；<br/>\n鬼需要混淆视听，不让其它人发现自己是鬼，并积极地猜平民的词语。\n            </p>\n        </div>\n        \n        <div class="card six">\n            <h2>投票</h2>\n            <p class="cd-text">\n            进行完一轮的阐述后，法官需要组织大家进行对鬼的投票。<br/><br/>\n\n票数最多的人被投死，如果票数相同，可通过双方的再次阐述来进行投票，直到投死一人为止。\n            </p>\n        </div>\n        \n        <div class="card seven">\n            <h2>遗言</h2>\n            <p class="cd-text">\n                被投死的人需要承认是否是鬼，如回答不是鬼，则没有遗言；<br/><br/>\n\n如果回答是鬼，则可以向法官问一个可以用“是”或“否”回答的问题，法官将如实作答。\n            </p>\n        </div>\n        \n        <div class="card eight">\n            <h2>游戏结束</h2>\n            <p class="cd-text">\n                当鬼猜出词时，鬼胜；<br/><br/>\n\n当平民和傻子的人数少于鬼的人数时，鬼胜；<br/><br/>\n\n当鬼全部死亡时，平民和傻子胜。\n            </p>\n        </div>\n        \n    </div>\n</div>\n\n<a class="h-close"></a>')}();return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}},window.JST=window.JST||{},window.JST["view/s-1"]=function(locals,filters,escape){function rethrow(a,b,c,d){var e=b.split("\n"),f=Math.max(d-3,0),g=Math.min(e.length,d+3),h=e.slice(f,g).map(function(a,b){var c=b+f+1;return(c==d?" >> ":"    ")+c+"| "+a}).join("\n");throw a.path=c,a.message=(c||"ejs")+":"+d+"\n"+h+"\n\n"+a.message,a}escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'<!--出题卡-->\r\n<div class="word">\r\n     <span>\r\n         <em></em><figure><input id="roomId" type="text" tabindex="-1" readonly="true"></figure>\r\n     </span>\r\n</div>\r\n<ul class="putin">\r\n    <li>\r\n        <textarea id="orTip" wrap="physical" rows="2" tabindex="2" placeholder="点此输入"></textarea>\r\n    </li>\r\n    <li>\r\n        <textarea id="idiTip" wrap="physical" rows="2" tabindex="3" placeholder="点此输入"></textarea>\r\n    </li>\r\n    <li>\r\n        <textarea id="ghostTip" wrap="physical" rows="2" tabindex="3"  value="0" readonly="true"></textarea>\r\n    </li>\r\n</ul>\r\n\r\n<section class="fire">\r\n    <div class="btn">\r\n        <span id="setTopic">\r\n            出题\r\n        </span>\r\n    </div>\r\n</section>',filename:"view/s-1.jst.ejs"};try{var buf=[];with(locals||{})!function(){buf.push('<!--出题卡-->\n<div class="word">\n     <span>\n         <em></em><figure><input id="roomId" type="text" tabindex="-1" readonly="true"></figure>\n     </span>\n</div>\n<ul class="putin">\n    <li>\n        <textarea id="orTip" wrap="physical" rows="2" tabindex="2" placeholder="点此输入"></textarea>\n    </li>\n    <li>\n        <textarea id="idiTip" wrap="physical" rows="2" tabindex="3" placeholder="点此输入"></textarea>\n    </li>\n    <li>\n        <textarea id="ghostTip" wrap="physical" rows="2" tabindex="3"  value="0" readonly="true"></textarea>\n    </li>\n</ul>\n\n<section class="fire">\n    <div class="btn">\n        <span id="setTopic">\n            出题\n        </span>\n    </div>\n</section>')}();return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}},window.JST=window.JST||{},window.JST["view/s-2"]=function(locals,filters,escape){function rethrow(a,b,c,d){var e=b.split("\n"),f=Math.max(d-3,0),g=Math.min(e.length,d+3),h=e.slice(f,g).map(function(a,b){var c=b+f+1;return(c==d?" >> ":"    ")+c+"| "+a}).join("\n");throw a.path=c,a.message=(c||"ejs")+":"+d+"\n"+h+"\n\n"+a.message,a}escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'<!--出题卡-->\r\n<div class="word">\r\n     <p>\r\n         <strong><%=gamerNum %></strong>人已经领取卡片<br>\r\n         全部人领取后可以开始游戏\r\n     </p>\r\n</div>\r\n<ul class="putin god">\r\n    <li>\r\n        <span><%=peopleWord || \' \' %></span>\r\n    </li>\r\n    <li>\r\n        <span><%=idiotWord || \' \'%></span>\r\n    </li>\r\n    <li>\r\n        <span><%=idiotWord.toString().trim().length %></span>\r\n    </li>\r\n</ul>\r\n\r\n<section class="fire">\r\n    <div class="btn">\r\n        <span id="startGame" class="wait">\r\n            等待玩家\r\n        </span>\r\n    </div>\r\n</section>',filename:"view/s-2.jst.ejs"};try{var buf=[];with(locals||{})!function(){buf.push('<!--出题卡-->\n<div class="word">\n     <p>\n         <strong>',escape((__stack.lineno=4,gamerNum)),'</strong>人已经领取卡片<br>\n         全部人领取后可以开始游戏\n     </p>\n</div>\n<ul class="putin god">\n    <li>\n        <span>',escape((__stack.lineno=10,peopleWord||" ")),"</span>\n    </li>\n    <li>\n        <span>",escape((__stack.lineno=13,idiotWord||" ")),"</span>\n    </li>\n    <li>\n        <span>",escape((__stack.lineno=16,idiotWord.toString().trim().length)),'</span>\n    </li>\n</ul>\n\n<section class="fire">\n    <div class="btn">\n        <span id="startGame" class="wait">\n            等待玩家\n        </span>\n    </div>\n</section>')}();return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}},window.JST=window.JST||{},window.JST["view/w-1"]=function(locals,filters,escape){function rethrow(a,b,c,d){var e=b.split("\n"),f=Math.max(d-3,0),g=Math.min(e.length,d+3),h=e.slice(f,g).map(function(a,b){var c=b+f+1;return(c==d?" >> ":"    ")+c+"| "+a}).join("\n");throw a.path=c,a.message=(c||"ejs")+":"+d+"\n"+h+"\n\n"+a.message,a}escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'<div class="word">\r\n     <span>\r\n         <em></em><figure><input type="text" placeholder="输入取卡口令"><i id="confirm">OK</i></figure>\r\n     </span>\r\n</div>\r\n\r\n<div class="card hide">\r\n   <span>\r\n       请输入<br>口令\r\n   </span>\r\n\r\n</div>\r\n<div class="face">\r\n\r\n</div>\r\n<span class="tip">\r\n   请输入口令\r\n</span>\r\n\r\n',filename:"view/w-1.jst.ejs"};try{var buf=[];with(locals||{})!function(){buf.push('<div class="word">\n     <span>\n         <em></em><figure><input type="text" placeholder="输入取卡口令"><i id="confirm">OK</i></figure>\n     </span>\n</div>\n\n<div class="card hide">\n   <span>\n       请输入<br>口令\n   </span>\n\n</div>\n<div class="face">\n\n</div>\n<span class="tip">\n   请输入口令\n</span>\n\n')}();return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}},window.JST=window.JST||{},window.JST["view/w-2"]=function(locals,filters,escape){function rethrow(a,b,c,d){var e=b.split("\n"),f=Math.max(d-3,0),g=Math.min(e.length,d+3),h=e.slice(f,g).map(function(a,b){var c=b+f+1;return(c==d?" >> ":"    ")+c+"| "+a}).join("\n");throw a.path=c,a.message=(c||"ejs")+":"+d+"\n"+h+"\n\n"+a.message,a}escape=escape||function(a){return String(a).replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var __stack={lineno:1,input:'<!--0 - UNKOWN-->\r\n<!--1 - GOD-->\r\n<!--2 - PEOPLE-->\r\n<!--3 - ONI-->\r\n<!--4 - IDIOT-->\r\n\r\n<div class="word">\r\n\r\n</div>\r\n\r\n<% if(typeof character != \'undefined\') { %>\r\n\r\n<% if(character === -1) { %>\r\n<div class="card hide">\r\n    <figure>\r\n        <p>出题中</p>\r\n    </figure>\r\n</div>\r\n<% } %>\r\n\r\n<% if(character === 2 || character === 4) { %>\r\n<div class="card peopleCard hide">\r\n    <figure>\r\n        <p><%= word%></p>\r\n    </figure>\r\n</div>\r\n<% } %>\r\n\r\n<% if(character === 3) { %>\r\n<div class="card ghostCard hide">\r\n    <figure>\r\n        <p><%= word%></p>\r\n    </figure>\r\n</div>\r\n<% } %>\r\n\r\n<% } %>\r\n\r\n<div class="face">\r\n   <span>\r\n       ?\r\n   </span>\r\n</div>\r\n\r\n<span class="tip">\r\n   <% if(typeof playerNum !== \'undefined\') {%>\r\n   <%= playerNum%>人已经加入房间\r\n\r\n   <% } %>\r\n</span>\r\n',filename:"view/w-2.jst.ejs"};try{var buf=[];with(locals||{})!function(){buf.push('<!--0 - UNKOWN-->\n<!--1 - GOD-->\n<!--2 - PEOPLE-->\n<!--3 - ONI-->\n<!--4 - IDIOT-->\n\n<div class="word">\n\n</div>\n\n'),__stack.lineno=11,"undefined"!=typeof character&&(buf.push("\n\n"),__stack.lineno=13,-1===character&&(buf.push('\n<div class="card hide">\n    <figure>\n        <p>出题中</p>\n    </figure>\n</div>\n'),__stack.lineno=19),buf.push("\n\n"),__stack.lineno=21,(2===character||4===character)&&(buf.push('\n<div class="card peopleCard hide">\n    <figure>\n        <p>',escape((__stack.lineno=24,word)),"</p>\n    </figure>\n</div>\n"),__stack.lineno=27),buf.push("\n\n"),__stack.lineno=29,3===character&&(buf.push('\n<div class="card ghostCard hide">\n    <figure>\n        <p>',escape((__stack.lineno=32,word)),"</p>\n    </figure>\n</div>\n"),__stack.lineno=35),buf.push("\n\n"),__stack.lineno=37),buf.push('\n\n<div class="face">\n   <span>\n       ?\n   </span>\n</div>\n\n<span class="tip">\n   '),__stack.lineno=46,"undefined"!=typeof playerNum&&(buf.push("\n   ",escape((__stack.lineno=47,playerNum)),"人已经加入房间\n\n   "),__stack.lineno=49),buf.push("\n</span>\n")}();return buf.join("")}catch(err){rethrow(err,__stack.input,__stack.filename,__stack.lineno)}},function(a){String.prototype.trim===a&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===a&&(Array.prototype.reduce=function(b){if(void 0===this||null===this)throw new TypeError;var c,d=Object(this),e=d.length>>>0,f=0;if("function"!=typeof b)throw new TypeError;if(0==e&&1==arguments.length)throw new TypeError;if(arguments.length>=2)c=arguments[1];else for(;;){if(f in d){c=d[f++];break}if(++f>=e)throw new TypeError}for(;e>f;)f in d&&(c=b.call(a,c,d[f],f,d)),f++;return c})}();var Zepto=function(){function a(a){return"[object Function]"==M.call(a)}function b(a){return a instanceof Object}function c(b){var c,d;if("[object Object]"!==M.call(b))return!1;if(d=a(b.constructor)&&b.constructor.prototype,!d||!hasOwnProperty.call(d,"isPrototypeOf"))return!1;for(c in b);return c===p||hasOwnProperty.call(b,c)}function d(a){return a instanceof Array}function e(a){return"number"==typeof a.length}function f(a){return a.filter(function(a){return a!==p&&null!==a})}function g(a){return a.length>0?[].concat.apply([],a):a}function h(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function i(a){return a in z?z[a]:z[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function j(a,b){return"number"!=typeof b||B[h(a)]?b:b+"px"}function k(a){var b,c;return y[a]||(b=x.createElement(a),x.body.appendChild(b),c=A(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),y[a]=c),y[a]}function l(a,b){return b===p?r(a):r(a).filter(b)}function m(b,c,d,e){return a(c)?c.call(b,d,e):c}function n(a,b,c){var d=a%2?b:b.parentNode;d?d.insertBefore(c,a?1==a?d.firstChild:2==a?b:null:b.nextSibling):r(c).remove()}function o(a,b){b(a);for(var c in a.childNodes)o(a.childNodes[c],b)}var p,q,r,s,t,u,v=[],w=v.slice,x=window.document,y={},z={},A=x.defaultView.getComputedStyle,B={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},C=/^\s*<(\w+|!)[^>]*>/,D=[1,3,8,9,11],E=["after","prepend","before","append"],F=x.createElement("table"),G=x.createElement("tr"),H={tr:x.createElement("tbody"),tbody:F,thead:F,tfoot:F,td:G,th:G,"*":x.createElement("div")},I=/complete|loaded|interactive/,J=/^\.([\w-]+)$/,K=/^#([\w-]+)$/,L=/^[\w-]+$/,M={}.toString,N={},O=x.createElement("div");return N.matches=function(a,b){if(!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=O).appendChild(a),d=~N.qsa(e,b).indexOf(a),f&&O.removeChild(a),d},t=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},u=function(a){return a.filter(function(b,c){return a.indexOf(b)==c})},N.fragment=function(a,b){b===p&&(b=C.test(a)&&RegExp.$1),b in H||(b="*");var c=H[b];return c.innerHTML=""+a,r.each(w.call(c.childNodes),function(){c.removeChild(this)})},N.Z=function(a,b){return a=a||[],a.__proto__=arguments.callee.prototype,a.selector=b||"",a},N.isZ=function(a){return a instanceof N.Z},N.init=function(b,e){if(b){if(a(b))return r(x).ready(b);if(N.isZ(b))return b;var g;if(d(b))g=f(b);else if(c(b))g=[r.extend({},b)],b=null;else if(D.indexOf(b.nodeType)>=0||b===window)g=[b],b=null;else if(C.test(b))g=N.fragment(b.trim(),RegExp.$1),b=null;else{if(e!==p)return r(e).find(b);g=N.qsa(x,b)}return N.Z(g,b)}return N.Z()},r=function(a,b){return N.init(a,b)},r.extend=function(a){return w.call(arguments,1).forEach(function(b){for(q in b)b[q]!==p&&(a[q]=b[q])}),a},N.qsa=function(a,b){var c;return a===x&&K.test(b)?(c=a.getElementById(RegExp.$1))?[c]:v:1!==a.nodeType&&9!==a.nodeType?v:w.call(J.test(b)?a.getElementsByClassName(RegExp.$1):L.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))},r.isFunction=a,r.isObject=b,r.isArray=d,r.isPlainObject=c,r.inArray=function(a,b,c){return v.indexOf.call(b,a,c)},r.trim=function(a){return a.trim()},r.uuid=0,r.map=function(a,b){var c,d,f,h=[];if(e(a))for(d=0;d<a.length;d++)c=b(a[d],d),null!=c&&h.push(c);else for(f in a)c=b(a[f],f),null!=c&&h.push(c);return g(h)},r.each=function(a,b){var c,d;if(e(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},r.fn={forEach:v.forEach,reduce:v.reduce,push:v.push,indexOf:v.indexOf,concat:v.concat,map:function(a){return r.map(this,function(b,c){return a.call(b,c,b)})},slice:function(){return r(w.apply(this,arguments))},ready:function(a){return I.test(x.readyState)?a(r):x.addEventListener("DOMContentLoaded",function(){a(r)},!1),this},get:function(a){return a===p?w.call(this):this[a]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return this.forEach(function(b,c){a.call(b,c,b)}),this},filter:function(a){return r([].filter.call(this,function(b){return N.matches(b,a)}))},add:function(a,b){return r(u(this.concat(r(a,b))))},is:function(a){return this.length>0&&N.matches(this[0],a)},not:function(b){var c=[];if(a(b)&&b.call!==p)this.each(function(a){b.call(this,a)||c.push(this)});else{var d="string"==typeof b?this.filter(b):e(b)&&a(b.item)?w.call(b):r(b);this.forEach(function(a){d.indexOf(a)<0&&c.push(a)})}return r(c)},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!b(a)?a:r(a)},last:function(){var a=this[this.length-1];return a&&!b(a)?a:r(a)},find:function(a){var b;return b=1==this.length?N.qsa(this[0],a):this.map(function(){return N.qsa(this,a)}),r(b)},closest:function(a,b){for(var c=this[0];c&&!N.matches(c,a);)c=c!==b&&c!==x&&c.parentNode;return r(c)},parents:function(a){for(var b=[],c=this;c.length>0;)c=r.map(c,function(a){return(a=a.parentNode)&&a!==x&&b.indexOf(a)<0?(b.push(a),a):void 0});return l(b,a)},parent:function(a){return l(u(this.pluck("parentNode")),a)},children:function(a){return l(this.map(function(){return w.call(this.children)}),a)},siblings:function(a){return l(this.map(function(a,b){return w.call(b.parentNode.children).filter(function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return this.map(function(){return this[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==A(this,"").getPropertyValue("display")&&(this.style.display=k(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return this.each(function(){r(this).wrapAll(r(a)[0].cloneNode(!1))})},wrapAll:function(a){return this[0]&&(r(this[0]).before(a=r(a)),a.append(this)),this},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return r(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(a){return(a===p?"none"==this.css("display"):a)?this.show():this.hide()},prev:function(){return r(this.pluck("previousElementSibling"))},next:function(){return r(this.pluck("nextElementSibling"))},html:function(a){return a===p?this.length>0?this[0].innerHTML:null:this.each(function(b){var c=this.innerHTML;r(this).empty().append(m(this,a,b,c))})},text:function(a){return a===p?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=a})},attr:function(a,c){var d;return"string"==typeof a&&c===p?0==this.length||1!==this[0].nodeType?p:"value"==a&&"INPUT"==this[0].nodeName?this.val():!(d=this[0].getAttribute(a))&&a in this[0]?this[0][a]:d:this.each(function(d){if(1===this.nodeType)if(b(a))for(q in a)this.setAttribute(q,a[q]);else this.setAttribute(a,m(this,c,d,this.getAttribute(a)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&this.removeAttribute(a)})},prop:function(a,b){return b===p?this[0]?this[0][a]:p:this.each(function(c){this[a]=m(this,b,c,this[a])})},data:function(a,b){var c=this.attr("data-"+h(a),b);return null!==c?c:p},val:function(a){return a===p?this.length>0?this[0].value:p:this.each(function(b){this.value=m(this,a,b,this.value)})},offset:function(){if(0==this.length)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}},css:function(a,b){if(b===p&&"string"==typeof a)return 0==this.length?p:this[0].style[t(a)]||A(this[0],"").getPropertyValue(a);var c="";for(q in a)"string"==typeof a[q]&&""==a[q]?this.each(function(){this.style.removeProperty(h(q))}):c+=h(q)+":"+j(q,a[q])+";";return"string"==typeof a&&(""==b?this.each(function(){this.style.removeProperty(h(a))}):c=h(a)+":"+j(a,b)),this.each(function(){this.style.cssText+=";"+c})},index:function(a){return a?this.indexOf(r(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return this.length<1?!1:i(a).test(this[0].className)},addClass:function(a){return this.each(function(b){s=[];var c=this.className,d=m(this,a,b,c);d.split(/\s+/g).forEach(function(a){r(this).hasClass(a)||s.push(a)},this),s.length&&(this.className+=(c?" ":"")+s.join(" "))})},removeClass:function(a){return this.each(function(b){return a===p?this.className="":(s=this.className,m(this,a,b,s).split(/\s+/g).forEach(function(a){s=s.replace(i(a)," ")}),this.className=s.trim(),void 0)})},toggleClass:function(a,b){return this.each(function(c){var d=m(this,a,c,this.className);(b===p?!r(this).hasClass(d):b)?r(this).addClass(d):r(this).removeClass(d)})}},["width","height"].forEach(function(a){r.fn[a]=function(b){var c,d=a.replace(/./,function(a){return a[0].toUpperCase()});return b===p?this[0]==window?window["inner"+d]:this[0]==x?x.documentElement["offset"+d]:(c=this.offset())&&c[a]:this.each(function(c){var d=r(this);d.css(a,m(this,b,c,d[a]()))})}}),E.forEach(function(a,c){r.fn[a]=function(){var a=r.map(arguments,function(a){return b(a)?a:N.fragment(a)});if(a.length<1)return this;var d=this.length,e=d>1,f=2>c;return this.each(function(b,g){for(var h=0;h<a.length;h++){var i=a[f?a.length-h-1:h];o(i,function(a){null==a.nodeName||"SCRIPT"!==a.nodeName.toUpperCase()||a.type&&"text/javascript"!==a.type||window.eval.call(window,a.innerHTML)}),e&&d-1>b&&(i=i.cloneNode(!0)),n(c,g,i)}})},r.fn[c%2?a+"To":"insert"+(c?"Before":"After")]=function(b){return r(b)[a](this),this}}),N.Z.prototype=r.fn,N.camelize=t,N.uniq=u,r.zepto=N,r}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(a){function b(a){return a._zid||(a._zid=l++)}function c(a,c,f,g){if(c=d(c),c.ns)var h=e(c.ns);return(k[b(a)]||[]).filter(function(a){return!(!a||c.e&&a.e!=c.e||c.ns&&!h.test(a.ns)||f&&b(a.fn)!==b(f)||g&&a.sel!=g)})}function d(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function e(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function f(b,c,d){a.isObject(b)?a.each(b,d):b.split(/\s/).forEach(function(a){d(a,c)})}function g(c,e,g,h,i,j){j=!!j;var l=b(c),m=k[l]||(k[l]=[]);f(e,g,function(b,e){var f=i&&i(e,b),g=f||e,k=function(a){var b=g.apply(c,[a].concat(a.data));return b===!1&&a.preventDefault(),b},l=a.extend(d(b),{fn:e,proxy:k,sel:h,del:f,i:m.length});m.push(l),c.addEventListener(l.e,k,j)})}function h(a,d,e,g){var h=b(a);f(d||"",e,function(b,d){c(a,b,d,g).forEach(function(b){delete k[h][b.i],a.removeEventListener(b.e,b.proxy,!1)})})}function i(b){var c=a.extend({originalEvent:b},b);return a.each(p,function(a,d){c[a]=function(){return this[d]=n,b[a].apply(b,arguments)},c[d]=o}),c}function j(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var b=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0,b.call(this)}}}var k=(a.zepto.qsa,{}),l=1,m={};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",a.event={add:g,remove:h},a.proxy=function(c,d){if(a.isFunction(c)){var e=function(){return c.apply(d,arguments)};return e._zid=b(c),e}if("string"==typeof d)return a.proxy(c[d],c);
throw new TypeError("expected function")},a.fn.bind=function(a,b){return this.each(function(){g(this,a,b)})},a.fn.unbind=function(a,b){return this.each(function(){h(this,a,b)})},a.fn.one=function(a,b){return this.each(function(c,d){g(this,a,b,null,function(a,b){return function(){var c=a.apply(d,arguments);return h(d,b,a),c}})})};var n=function(){return!0},o=function(){return!1},p={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(b,c,d){var e=!1;return("blur"==c||"focus"==c)&&(a.iswebkit?c="blur"==c?"focusout":"focus"==c?"focusin":c:e=!0),this.each(function(f,h){g(h,c,d,b,function(c){return function(d){var e,f=a(d.target).closest(b,h).get(0);return f?(e=a.extend(i(d),{currentTarget:f,liveFired:h}),c.apply(f,[e].concat([].slice.call(arguments,1)))):void 0}},e)})},a.fn.undelegate=function(a,b,c){return this.each(function(){h(this,b,c,a)})},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d){return void 0==c||a.isFunction(c)?this.bind(b,c):this.delegate(c,b,d)},a.fn.off=function(b,c,d){return void 0==c||a.isFunction(c)?this.unbind(b,c):this.undelegate(c,b,d)},a.fn.trigger=function(b,c){return"string"==typeof b&&(b=a.Event(b)),j(b),b.data=c,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(b)})},a.fn.triggerHandler=function(b,d){var e,f;return this.each(function(g,h){e=i("string"==typeof b?a.Event(b):b),e.data=d,e.target=h,a.each(c(h,b.type||b),function(a,b){return f=b.proxy(e),e.isImmediatePropagationStopped()?!1:void 0})}),f},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){if(a)this.bind(b,a);else if(this.length)try{this.get(0)[b]()}catch(c){}return this}}),a.Event=function(a,b){var c=document.createEvent(m[a]||"Events"),d=!0;if(b)for(var e in b)"bubbles"==e?d=!!b[e]:c[e]=b[e];return c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null),c}}(Zepto),function(a){function b(a){var b=this.os={},c=this.browser={},d=a.match(/WebKit\/([\d.]+)/),e=a.match(/(Android)\s+([\d.]+)/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),h=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=h&&a.match(/TouchPad/),j=a.match(/Kindle\/([\d.]+)/),k=a.match(/Silk\/([\d._]+)/),l=a.match(/(BlackBerry).*Version\/([\d.]+)/);(c.webkit=!!d)&&(c.version=d[1]),e&&(b.android=!0,b.version=e[2]),g&&(b.ios=b.iphone=!0,b.version=g[2].replace(/_/g,".")),f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,".")),h&&(b.webos=!0,b.version=h[2]),i&&(b.touchpad=!0),l&&(b.blackberry=!0,b.version=l[2]),j&&(b.kindle=!0,b.version=j[1]),k&&(c.silk=!0,c.version=k[1]),!k&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0)}b.call(a,navigator.userAgent),a.__detect=b}(Zepto),function(a,b){function c(a){return a.toLowerCase()}function d(a){return e?e+a:c(a)}var e,f="",g={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},h=window.document,i=h.createElement("div"),j=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,k={};a.each(g,function(a,d){return i.style[a+"TransitionProperty"]!==b?(f="-"+c(a)+"-",e=d,!1):void 0}),k[f+"transition-property"]=k[f+"transition-duration"]=k[f+"transition-timing-function"]=k[f+"animation-name"]=k[f+"animation-duration"]="",a.fx={off:e===b&&i.style.transitionProperty===b,cssPrefix:f,transitionEnd:d("TransitionEnd"),animationEnd:d("AnimationEnd")},a.fn.animate=function(b,c,d,e){return a.isObject(c)&&(d=c.easing,e=c.complete,c=c.duration),c&&(c/=1e3),this.anim(b,c,d,e)},a.fn.anim=function(c,d,e,g){var h,i,l,m={},n=this,o=a.fx.transitionEnd;if(d===b&&(d=.4),a.fx.off&&(d=0),"string"==typeof c)m[f+"animation-name"]=c,m[f+"animation-duration"]=d+"s",o=a.fx.animationEnd;else{for(i in c)j.test(i)?(h||(h=[]),h.push(i+"("+c[i]+")")):m[i]=c[i];h&&(m[f+"transform"]=h.join(" ")),a.fx.off||"object"!=typeof c||(m[f+"transition-property"]=Object.keys(c).join(", "),m[f+"transition-duration"]=d+"s",m[f+"transition-timing-function"]=e||"linear")}return l=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(o,arguments.callee)}a(this).css(k),g&&g.call(this)},d>0&&this.bind(o,l),setTimeout(function(){n.css(m),0>=d&&setTimeout(function(){n.each(function(){l.call(this)})},0)},0),this},i=null}(Zepto),function(a){function b(b,c,d){var e=a.Event(c);return a(b).trigger(e,d),!e.defaultPrevented}function c(a,c,d,e){return a.global?b(c||s,d,e):void 0}function d(b){b.global&&0===a.active++&&c(b,null,"ajaxStart")}function e(b){b.global&&!--a.active&&c(b,null,"ajaxStop")}function f(a,b){var d=b.context;return b.beforeSend.call(d,a,b)===!1||c(b,d,"ajaxBeforeSend",[a,b])===!1?!1:(c(b,d,"ajaxSend",[a,b]),void 0)}function g(a,b,d){var e=d.context,f="success";d.success.call(e,a,f,b),c(d,e,"ajaxSuccess",[b,d,a]),i(f,b,d)}function h(a,b,d,e){var f=e.context;e.error.call(f,d,b,a),c(e,f,"ajaxError",[d,e,a]),i(b,d,e)}function i(a,b,d){var f=d.context;d.complete.call(f,b,a),c(d,f,"ajaxComplete",[b,d]),e(d)}function j(){}function k(a){return a&&(a==x?"html":a==w?"json":u.test(a)?"script":v.test(a)&&"xml")||"text"}function l(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function m(b){r(b.data)&&(b.data=a.param(b.data)),!b.data||b.type&&"GET"!=b.type.toUpperCase()||(b.url=l(b.url,b.data))}function n(b,c,d,e){var f=a.isArray(c);a.each(c,function(c,g){e&&(c=d?e:e+"["+(f?"":c)+"]"),!e&&f?b.add(g.name,g.value):(d?a.isArray(g):r(g))?n(b,g,d,c):b.add(c,g)})}var o,p,q=0,r=a.isObject,s=window.document,t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,u=/^(?:text|application)\/javascript/i,v=/^(?:text|application)\/xml/i,w="application/json",x="text/html",y=/^\s*$/;a.active=0,a.ajaxJSONP=function(b){var c,d="jsonp"+ ++q,e=s.createElement("script"),f=function(){a(e).remove(),d in window&&(window[d]=j),i("abort",h,b)},h={abort:f};return b.error&&(e.onerror=function(){h.abort(),b.error()}),window[d]=function(f){clearTimeout(c),a(e).remove(),delete window[d],g(f,h,b)},m(b),e.src=b.url.replace(/=\?/,"="+d),a("head").append(e),b.timeout>0&&(c=setTimeout(function(){h.abort(),i("timeout",h,b)},b.timeout)),h},a.ajaxSettings={type:"GET",beforeSend:j,success:j,error:j,complete:j,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:w,xml:"application/xml, text/xml",html:x,text:"text/plain"},crossDomain:!1,timeout:0},a.ajax=function(b){var c=a.extend({},b||{});for(o in a.ajaxSettings)void 0===c[o]&&(c[o]=a.ajaxSettings[o]);d(c),c.crossDomain||(c.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(c.url)&&RegExp.$2!=window.location.host);var e=c.dataType,i=/=\?/.test(c.url);if("jsonp"==e||i)return i||(c.url=l(c.url,"callback=?")),a.ajaxJSONP(c);c.url||(c.url=window.location.toString()),m(c);var n,q=c.accepts[e],r={},s=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:window.location.protocol,t=a.ajaxSettings.xhr();c.crossDomain||(r["X-Requested-With"]="XMLHttpRequest"),q&&(r.Accept=q,q.indexOf(",")>-1&&(q=q.split(",",2)[0]),t.overrideMimeType&&t.overrideMimeType(q)),(c.contentType||c.data&&"GET"!=c.type.toUpperCase())&&(r["Content-Type"]=c.contentType||"application/x-www-form-urlencoded"),c.headers=a.extend(r,c.headers||{}),t.onreadystatechange=function(){if(4==t.readyState){clearTimeout(n);var a,b=!1;if(t.status>=200&&t.status<300||304==t.status||0==t.status&&"file:"==s){e=e||k(t.getResponseHeader("content-type")),a=t.responseText;try{"script"==e?(1,eval)(a):"xml"==e?a=t.responseXML:"json"==e&&(a=y.test(a)?null:JSON.parse(a))}catch(d){b=d}b?h(b,"parsererror",t,c):g(a,t,c)}else h(null,"error",t,c)}};var u="async"in c?c.async:!0;t.open(c.type,c.url,u);for(p in c.headers)t.setRequestHeader(p,c.headers[p]);return f(t,c)===!1?(t.abort(),!1):(c.timeout>0&&(n=setTimeout(function(){t.onreadystatechange=j,t.abort(),h(null,"timeout",t,c)},c.timeout)),t.send(c.data?c.data:null),t)},a.get=function(b,c){return a.ajax({url:b,success:c})},a.post=function(b,c,d,e){return a.isFunction(c)&&(e=e||d,d=c,c=null),a.ajax({type:"POST",url:b,data:c,success:d,dataType:e})},a.getJSON=function(b,c){return a.ajax({url:b,success:c,dataType:"json"})},a.fn.load=function(b,c){if(!this.length)return this;var d,e=this,f=b.split(/\s/);return f.length>1&&(b=f[0],d=f[1]),a.get(b,function(b){e.html(d?a(s.createElement("div")).html(b.replace(t,"")).find(d).html():b),c&&c.call(e)}),this};var z=encodeURIComponent;a.param=function(a,b){var c=[];return c.add=function(a,b){this.push(z(a)+"="+z(b))},n(c,a,b),c.join("&").replace("%20","+")}}(Zepto),function(a){a.fn.serializeArray=function(){var b,c=[];return a(Array.prototype.slice.call(this.get(0).elements)).each(function(){b=a(this);var d=b.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=d&&"reset"!=d&&"button"!=d&&("radio"!=d&&"checkbox"!=d||this.checked)&&c.push({name:b.attr("name"),value:b.val()})}),c},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(b)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(a){function b(a){return"tagName"in a?a:a.parentNode}function c(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function d(){g=null,h.last&&(h.el.trigger("longTap"),h={})}function e(){g&&clearTimeout(g),g=null}var f,g,h={},i=750;a(document).ready(function(){var j,k;a(document.body).bind("touchstart",function(c){j=Date.now(),k=j-(h.last||j),h.el=a(b(c.touches[0].target)),f&&clearTimeout(f),h.x1=c.touches[0].pageX,h.y1=c.touches[0].pageY,k>0&&250>=k&&(h.isDoubleTap=!0),h.last=j,g=setTimeout(d,i)}).bind("touchmove",function(a){e(),h.x2=a.touches[0].pageX,h.y2=a.touches[0].pageY}).bind("touchend",function(){e(),h.isDoubleTap?(h.el.trigger("doubleTap"),h={}):h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?(h.el.trigger("swipe")&&h.el.trigger("swipe"+c(h.x1,h.x2,h.y1,h.y2)),h={}):"last"in h&&(h.el.trigger("tap"),f=setTimeout(function(){f=null,h.el.trigger("singleTap"),h={}},250))}).bind("touchcancel",function(){f&&clearTimeout(f),g&&clearTimeout(g),g=f=null,h={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}(Zepto),function(a){function b(a,b){return typeof a===b}function c(a,b){for(var c in a)if(void 0!==j[a[c]])return"pfx"==b?a[c]:!0;return!1}function d(a,d){var e=a.charAt(0).toUpperCase()+a.substr(1),f=(a+" "+i.join(e+" ")+e).split(" ");return b(d,"string")||b(d,"undefined")?c(f,d):void 0}var e={},f=document.documentElement,g="modernizr",h=function(a,b,c,d){var e,h,i,j=document.createElement("div"),k=document.body,l=k?k:document.createElement("body");if(parseInt(c,10))for(;c--;)i=document.createElement("div"),i.id=d?d[c]:g+(c+1),j.appendChild(i);return e=["&#173;",'<style id="s',g,'">',a,"</style>"].join(""),j.id=g,(k?j:l).innerHTML+=e,l.appendChild(j),k||(l.style.background="",f.appendChild(l)),h=b(j,a),k?j.parentNode.removeChild(j):l.parentNode.removeChild(l),!!h},i="Webkit Moz O ms".split(" "),j=f.style;e.hasTransform=function(){return!!d("transform")},e.has3d=function(){var a=!!d("perspective");return a&&"webkitPerspective"in f.style&&h("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b){a=9===b.offsetLeft&&3===b.offsetHeight}),a},a.css3=e}(window),function(a,b){var c=/android/gi.test(navigator.appVersion),d=b.has3d(),e=!c&&b.hasTransform(),f=e?"translateX":"left",g=d?"translate3d(":"translate(",h=d?",0)":")";return a.touchSlider=function(a,b){this.op={container:".slider",wrap:".slider-outer",wrapUl:".slider-wrap",wrapStatus:".slider-status",margin:0,cls:"sel",prev:null,next:null,lazy:"dataimg",anitime:400,easeing:"ease-out",isLoop:!1,isPlay:!1,bounce:!0,inter:5e3,isHide:!0,ontouchstart:null,ontouchend:null,transitionEnd:null},b&&(this.op.container=b),this.reset(a),this.increaseEvent()},a.extend(a.touchSlider.prototype,{reset:function(b){a.extend(this.op,b||{}),this.op.left=this.op.left||0,this.findEl()&&this.init()},findEl:function(){var b=this.op,c=this._container=a(b.container);return 0==c.length?null:(this._wrap=c.find(b.wrap),0==this._wrap.length?null:(this._wul=c.find(b.wrapUl),0==this._wul.length?null:(this._childs=this._wul.children(),0==this._childs.length?null:(this._wrapStatus=b.wrapStatus&&c.find(b.wrapStatus),this._prev=b.prev&&c.find(b.prev)[0],this._next=b.next&&c.find(b.next)[0],this))))},init:function(){var b=this,c=b.op,d=(b._container,b._wrap),f=b._wul,i=b._childs,j=b._wrapStatus,k=b._prev,l=b._next,m=b._step=c.step||d.width(),n=b._len=i.length,o=i[0].offsetWidth,p=c.margin,q=b._status=Math.floor(m/o),r=o*n;if(1>q)throw Error("childs宽度不能大于_wrap宽度");(q>1||c.step)&&(c.isLoop=!1),c.isLoop&&(r=o*(n+2),b.op.bounce=!0),e&&(d.css({"-webkit-transform-style":"preserve-3d"}),i.css({"-webkit-transform":g+"0,0"+h})),p&&"number"==typeof p&&(r+=(n-1)*p,b._step+=p);var s=c.left;s-=(b._current||0)*b._step,e&&f.css("-webkit-transform",g+s+"px,0"+h)||f.css("left",s);var t=b._pages=Math.ceil(n/q);if(j&&j.length>0){var u="",v=j.children();if(0==v.length){for(var w=0;t>w;w++)u+="<span"+(0==w?" class="+c.cls:"")+"></span>";j.html(u)}}var x="img["+c.lazy+"]";return this.lazyimg=f.find(x),this.getImg(),1>=t?(k&&(k.style.display="none"),l&&(l.style.display="none"),j&&j.hide(),null):(f.css("width",r),c.isLoop&&(a(i[0].cloneNode(!0)).appendTo(f),a(i[n-1].cloneNode(!0)).css({position:"relative",left:-m*(n+2)}).appendTo(f),b._childs=f.children(),b.lazyimg.push(1),b.lazyimg=a(b.lazyimg.concat(a(b._childs[n+1]).find(x)))),b.eventInit(),void 0)},eventInit:function(){var a=this,b=a.op.left;a._coord={},a._moveCoord={},a._cmax=b,a._cmin=-(a._pages-1)*a._step,b&&(a._cmin+=b),a._current=a._current||0,a._left=b+a._current*a._step,a._wrapStatus&&a._wrapStatus.length>0&&(a._statusChild=a._wrapStatus.children(),a._selChild=a._statusChild[a._current]),a._minpage=0,a._maxpage=a._pages-1,a._isScroll=!1,a._playTimer=null},increaseEvent:function(){var a=this,b=a.op,c=a._wrap[0];return c?(c.addEventListener&&(c.addEventListener("touchstart",a,!1),c.addEventListener("touchmove",a,!1),c.addEventListener("touchend",a,!1)),b.isPlay&&a.begin(),a._prev&&(a._prev.onclick=function(b){a.prev.call(a,b)}),a._next&&(a._next.onclick=function(b){a.next.call(a,b)}),a._prev&&a._next&&a.updateArrow(),void 0):null},handleEvent:function(a){var b=this;switch(a.type){case"touchstart":b.start(a);break;case"touchmove":b.move(a);break;case"touchend":case"touchcancel":b.end(a)}},getImg:function(b){var c=this,d=void 0===b?!0:!1,e=(c.op.isLoop,c.op.lazy),f=c._status,g=c._childs,h=g.length,i=b&&parseInt(b,10)||0,j=c.lazyimg,k=[];if(0!=j.length){if(0>i)j.each(function(a,b){1!=b&&(a==h+i||a==h+i-2)&&(k.push(b),j[a]=1)});else{i+=1;var l,m,n;if(f>1)m=(d?i-1:i)*f,n=(i+1)*f;else var l=a(g[i-1]).children().length,m=(d?i-1:i)*l,n=(i+1)*l;j.each(function(a,b){1!=b&&a>=m&&n>a&&(k.push(b),j[a]=1)})}if(0!=k.length){var o,p;a(k).each(function(b,c){p=a(c),o=p.attr(e),o&&(p.attr("src",o),p.removeAttr(e))})}}},getXY:function(a){var b=a.touches?a.touches[0]:a;return{x:b.clientX,y:b.clientY}},start:function(a){var b=this,c=b.op;b._isScroll||(b._movestart=void 0,b._disX=0,b._coord=b.getXY(a),c.ontouchstart&&c.ontouchstart())},move:function(a){var b,c=this,d=c.op,f=c.getXY(a),i=c._disX=f.x-c._coord.x,j=d.left;"undefined"==typeof c._movestart&&(c._movestart=!!(c._movestart||Math.abs(i)<Math.abs(f.y-c._coord.y))),c._movestart||(a.preventDefault(),c.stop(),!d.isLoop&&d.bounce&&(i/=!c._current&&i>0||c._current==c._maxpage&&0>i?Math.abs(i)/this._step+1:1),b=j-c._current*c._step+i,c.op.bounce||(c._left<c._cmin&&(b=c._cmin),c._left>c._cmax&&(b=c._cmax)),e?c._wul.css("-webkit-transform",g+b+"px,0"+h):c._wul.css("left",b),c._disX=i,c._left=b)},end:function(a){var b=this,c=b.op;if(!b._movestart){a.preventDefault();var d=b._disX;-10>d?b.next():d>10&&b.prev(),c.ontouchend&&c.ontouchend(b._current)}d=null},prev:function(b){b&&b.preventDefault&&b.preventDefault();var c=this;c._current-=1,c._current<c._minpage&&(c._current=c.op.isLoop?c._minpage-1:c._minpage),a(document).trigger("slider",[c._current+1]),this.touchf(-1)},next:function(b){b&&b.preventDefault&&b.preventDefault();var c=this;c._current+=1,c._current>c._maxpage&&(c._current=c.op.isLoop?c._maxpage+1:c._maxpage),a(document).trigger("slider",[c._current+1]),c.touchf(1)},touchf:function(b){var c=this,d=c.op,i=d.left,j=c._left,k=i-c._current*c._step;if(c._isScroll=!0,c.stop(),j==k)c._isScroll=!1;else{c.getImg(c._current);var l={};l[f]=k+"px",c._wul.animate(l,d.anitime,d.easeing,function(){d.isLoop&&(c._current>=c._maxpage+1?c._current=0:c._current<=c._minpage-1&&(c._current=c._maxpage)),c._left=i-c._current*c._step,e?a(this).css("-webkit-transform",g+c._left+"px,0"+h):a(this).css("left",c._left),d.isLoop||c._current!=c._maxpage?c.begin():c.op.isPlay=!1,c.update(),c.updateArrow(),c._isScroll=!1,d.transitionEnd&&d.transitionEnd(c._current,b)})}},update:function(){var b=this,c=b.op.cls;b._statusChild&&b._statusChild[b._current]&&b._selChild&&(a(b._selChild).removeClass(c),a(b._statusChild[b._current]).addClass(c),b._selChild=b._statusChild[b._current])},updateArrow:function(){var a=this,b=a.op,c=a._prev,d=a._next;(c||d)&&(b.isLoop||b.isHide&&(c.style.display=a._current<=0?"none":"",d.style.display=a._current>=a._maxpage?"none":""))},begin:function(){var a=this,b=a.op;b.isPlay&&(a.stop(),a._playTimer=setInterval(function(){a.next()},b.inter))},stop:function(){var a=this,b=a.op;b.isPlay&&a._playTimer&&(clearInterval(a._playTimer),a._playTimer=null)},destroy:function(){var a=this;if(a._container[0].removeAttribute("isLoad"),!(a._pages<=1)){var b=a._wrap[0];b.removeEventListener("touchstart",a,!1),b.removeEventListener("touchmove",a,!1),b.removeEventListener("touchend",a,!1),a._prev&&(a._prev.onclick=null),a._next&&(a._next.onclick=null)}}}),a.touchSlider.cache=[],a.fn.slider=function(b){return this.each(function(c,d){d.getAttribute("isLoad")||(d.setAttribute("isLoad",!0),a.touchSlider.cache.push(new a.touchSlider(b,d)))})},a.touchSlider.destroy=function(){var b=a.touchSlider.cache,c=b.length;if(!(1>c)){for(var d=0;c>d;d++)b[d].destroy();a.touchSlider.cache=[]}},a.touchSlider}(Zepto,window.css3,window),function(a){function b(a){return e.transform3d?"translate3d("+a+"px, 0, 0)":"translate("+a+"px, 0)"}function c(a,b){return e.touch?a.changedTouches[0][b]:a[b]}var d=a.document,e={transform3d:"WebKitCSSMatrix"in a&&"m11"in new WebKitCSSMatrix,touch:"ontouchstart"in a},f=e.touch?"touchstart":"mousedown",g=e.touch?"touchmove":"mousemove",h=e.touch?"touchend":"mouseup",i=function(a,b){return this instanceof i?this.init(a,b):new i(a,b)};i.prototype={init:function(a,c){var e=this;return e.element=a,"string"==typeof a&&(e.element=d.querySelector(a)),e.element.style.webkitTransitionProperty="-webkit-transform",e.element.style.webkitTransitionTimingFunction="cubic-bezier(0,0,0.25,1)",e.element.style.webkitTransitionDuration="0",e.element.style.webkitTransform=b(0),e.conf=c||{},e.touchEnabled=!0,e.currentPoint=0,e.currentX=0,e.refresh(),e.element.addEventListener(f,e,!1),e.element.addEventListener(g,e,!1),e.element.addEventListener(h,e,!1),e},handleEvent:function(a){var b=this;switch(a.type){case f:b._touchStart(a);break;case g:b._touchMove(a);break;case h:b._touchEnd(a);break;case"click":b._click(a)}},refresh:function(){var a=this,b=a.conf;a.maxPoint=b.point||function(){for(var b,c=a.element.childNodes,d=0,e=0,f=c.length;f>e;e++)b=c[e],1===b.nodeType&&d++;return d>0&&d--,d}(),a.distance=b.distance||a.element.scrollWidth/(a.maxPoint+1),a.maxX=b.maxX?-b.maxX:-a.distance*a.maxPoint,a.moveToPoint(a.currentPoint)},hasNext:function(){var a=this;return a.currentPoint<a.maxPoint},hasPrev:function(){var a=this;return a.currentPoint>0},toNext:function(){var a=this;a.hasNext()&&a.moveToPoint(a.currentPoint+1)},toPrev:function(){var a=this;a.hasPrev()&&a.moveToPoint(a.currentPoint-1)},moveToPoint:function(a){var b=this;b.currentPoint=0>a?0:a>b.maxPoint?b.maxPoint:parseInt(a),b.element.style.webkitTransitionDuration="500ms",b._setX(-b.currentPoint*b.distance);var c=d.createEvent("Event");c.initEvent("flipsnap.moveend",!0,!1),b.element.dispatchEvent(c)},_setX:function(a){var c=this;c.currentX=a,c.element.style.webkitTransform=b(a)},_touchStart:function(a){var b=this;b.touchEnabled&&(e.touch||a.preventDefault(),b.element.style.webkitTransitionDuration="0",b.scrolling=!0,b.moveReady=!1,b.startPageX=c(a,"pageX"),b.startPageY=c(a,"pageY"),b.basePageX=b.startPageX,b.directionX=0,b.startTime=a.timeStamp)},_touchMove:function(a){var b=this;if(b.scrolling){var d,e,f,g,h=c(a,"pageX"),i=c(a,"pageY");b.moveReady?(a.preventDefault(),a.stopPropagation(),d=h-b.basePageX,e=b.currentX+d,(e>=0||e<b.maxX)&&(e=Math.round(b.currentX+d/3)),b._setX(e),b.directionX=d>0?-1:1):(f=Math.abs(h-b.startPageX),g=Math.abs(i-b.startPageY),f>5?(a.preventDefault(),a.stopPropagation(),b.moveReady=!0,b.element.addEventListener("click",b,!0)):g>5&&(b.scrolling=!1)),b.basePageX=h}},_touchEnd:function(){var a=this;if(a.scrolling){a.scrolling=!1;var b=-a.currentX/a.distance;b=a.directionX>0?Math.ceil(b):a.directionX<0?Math.floor(b):Math.round(b),a.moveToPoint(b),setTimeout(function(){a.element.removeEventListener("click",a,!0)},200)}},_click:function(a){a.stopPropagation(),a.preventDefault()},destroy:function(){var a=this;a.element.removeEventListener(f,a),a.element.removeEventListener(g,a),a.element.removeEventListener(h,a)}},a.Flipsnap=i}(this),function(a,b){var c=a("#wrapper"),d=a("#helper"),e="http://s.wenzisha.com",f={open:e+"/room/open?callback=?",join:e+"/room/join?callback=?",setPuzzle:e+"/room/set-puzzle?callback=?",getPlayers:e+"/room/get-players?callback=?",getAmount:e+"/room/get-amount?callback=?",getStatus:e+"/room/get-status?callback=?",getPuzzle:e+"/player/get-puzzle?callback=?",randomPuzzle:e+"/room/random-puzzle?callback=?",startGame:e+"/room/start-game?callback=?",endGame:e+"/room/end-game?callback=?"},g={UNKOWN:0,GOD:1,PEOPLE:2,ONI:3,IDIOT:4},h={IDLE:0,JOIN:1,PUZZLE:2,GAME:3},i={1:"没有指定的房间",2:"没有指定的玩家",4:"房间已满",8:"当前指向的不是管理员",16:"当前玩家没有权限（不是Room的成员）",32:"当前玩家不是JOIN的状态",1024:"未知错误"},j={RANDOM_PUZZLE_AJAX_ERROR:"randomPuzzle Ajax error!",GET_PLAYERS_AJAX_ERROR:"God getPlayers Ajax error!",GET_PUZZLE_ROLE_ERROR:"getPuzzle role error!",TIME_OUT:"timeout",JSONP_AJAX_ERROR:"jsonP Ajax error!",NOT_VALID_GET_PALYERS_STATUS:"getPlayers status not valid"},k={certificate:{adminId:"",roomId:-1},status:-1,role:{peopleWord:"",idiotWord:""},playerNumTick:null,randomPuzzle:function(b){a.ajax({type:"GET",url:f.randomPuzzle,data:{roomId:k.certificate.roomId,adminId:k.certificate.adminId},dataType:"jsonp",success:function(a){a&&a.words&&b(a)},error:function(){throw Error(j.RANDOM_PUZZLE_AJAX_ERROR)}})},startGame:function(b){a.ajax({type:"GET",url:f.startGame,data:{roomId:k.certificate.roomId,adminId:k.certificate.adminId,words:k.role.peopleWord+","+k.role.idiotWord},dataType:"jsonp",success:function(a){a&&"number"==typeof a.code&&0==a.code&&b(a)},error:function(){throw"God setTopic Ajax error!"}})},getAmount:function(b){k.status==h.PUZZLE&&(a.ajax({type:"GET",url:f.getAmount,data:{roomId:k.certificate.roomId,adminId:k.certificate.adminId},dataType:"jsonp",success:function(a){a&&b(a)},error:function(){throw Error(j.GET_PLAYERS_AJAX_ERROR)}}),k.playerNumTick=setTimeout(arguments.callee,2e3,b))},endGame:function(){},open:function(b){a.ajax({type:"GET",url:f.open,data:{},dataType:"jsonp",context:a("body"),success:function(a){a&&"number"==typeof a.code&&0==a.code&&b(a)},error:function(){throw l.mask.hide(),"open Ajax error!"}})},getPlayers:function(b){a.ajax({type:"GET",url:f.getPlayers,data:{roomId:k.certificate.roomId,adminId:k.certificate.adminId},dataType:"jsonp",success:function(a){a&&a.playerList&&b(a)},error:function(){throw"God setTopic Ajax error!"}})},callbackGetPlayers:function(c){for(var d=0,e=0,f=0,g=a(".playerNum"),h="",i=c.playerList.length,j=0;i>j;j++)h=c.playerList[j].character,3==h?f++:2==h?d++:4==h&&e++;var l="<strong>"+d+"</strong>个平民,                                          <strong>"+e+"</strong>个傻子,                                          <strong>"+f+"</strong>个鬼";g.html(l),a(".start").css("background-color","black").css("color","white").find("label").not(".playerNum").text("天黑请闭眼"),a(".f-r-3").addClass("f-r-2").removeClass("f-r-3"),b.clearTimeout(k.playerNumTick)},callbackOpen:function(b){k.certificate.adminId=b.adminId||"",k.certificate.roomId=b.roomId||"",k.status=2;var c='<div>                            <h1>                            法官出题                            </h1>                        </div>                        <div>                            <span class="room">                            135房间                            </span>                        </div>                        <span class="replay">                        </span>',d='<div class="top">								<span class="a">									<textarea id="comm" placeholder="输入平民的词"></textarea>								</span><span class="b">									<textarea id="idiot" placeholder="输入傻子的词"></textarea>								</span>							</div>							<div class="bottom">								<span class="start">									<label class="playerNum">0人已经加入了房间</label>									<label>开始游戏</label>								</span>							</div>',e='<div id="msg">                                <div class="title">135</div>                        <div class="todo">将此房间号告诉游戏者</div>                        <div class="btn">好</div>                        </div>';a("header").html(c).find(".room").text(b.roomId+"房间"),a(".container").html(d).find(".a input").focus(),a(".f-r-1").addClass("f-r-2").removeClass("f-r-1"),a(".f-r-2").addClass("f-r-3").removeClass("f-r-2"),a("#msg").length>0?a("#msg").show().find(".title").text(b.roomId):a(e).appendTo("#wrapper").find(".title").text(b.roomId),l.mask.hide()},callbackStartGame:function(a){k.status=a.status,k.getPlayers(k.callbackGetPlayers)},callbackEnd:function(){},callbackGetAmount:function(b){var c=b.playerAmount?b.playerAmount-1:0;a(".playerNum").text(c+"人已经加入了房间")},callbackRandom:function(b){a("#idiot").val(b.words[0]||""),a("#comm").val(b.words[1]||"")},init:function(){a(document).on("tap",".down .l",function(){l.mask.show(),k.open(k.callbackOpen)}),a(document).on("tap",".btn",function(){a("#msg").hide(),k.getAmount(k.callbackGetAmount)}),a(document).on("tap",".start",function(){var c=a("#comm").val(),d=a("#idiot").val();if("black"!=a(this).css("backgroundColor"))return c.length!=d.length?(alert("平民和傻子的词长需一致!"),void 0):0==c.trim().length||0==d.trim().length?(alert("请填词!"),void 0):(b.confirm("请确认所有玩家都已加入，否则可能丢失玩家")&&(k.role.peopleWord=c.trim(),k.role.idiotWord=d.trim(),k.startGame(k.callbackStartGame)),void 0)}),a(document).on("tap",".replay",function(){b.location.reload()})}},l={init:function(){l.reset(),l.hideAddrBar(),l.eyes(),l.help(),l.registerShake(),l.shake(),l.overlay()},set:function(){c.on("tap",".set",function(){alert("We are striving for that!")})},eyes:function(){var a=document.querySelector(".up span");switchTime=800,setTimeout(function(){a.style.zIndex=-1==a.style.zIndex?1:-1,switchTime=800==switchTime?1200:800,setTimeout(arguments.callee,switchTime)},1e3)},registerShake:function(){a.fn.shake=function(c){var d={sensitivity:15,timer:200,position:{x1:0,x2:0,y1:0,y2:0,z1:0,z2:0},action:{}};c&&a.extend(d,c);var e={_timer:{},checkUA:function(){return"undefined"!=typeof b.DeviceOrientationEvent?"undefined"!=typeof b.DeviceMotionEvent?(b.addEventListener("devicemotion",function(a){e.get(a)},!1),e.start(),!0):(console.log("对不起您的设备不支持摇动"),!1):(console.log("对不起您的设备不支持摇动"),!1)},get:function(a){d.position.x1=a.accelerationIncludingGravity.x,d.position.y1=a.accelerationIncludingGravity.y,d.position.z1=a.accelerationIncludingGravity.z},isMeetSensitivity:function(){var a=Math.abs(d.position.x1-d.position.x2+d.position.y1-d.position.y2+d.position.z1-d.position.z2);a>d.sensitivity&&d.action(),d.position.x2=d.position.x1,d.position.y2=d.position.y1,d.position.z2=d.position.z1},start:function(){e._timer=setInterval(function(){e.isMeetSensitivity()},d.timer)},stop:function(){clearInterval(e._timer)}};e.checkUA()}},shake:function(){a(b).shake({action:function(){"black"!=a(".start").css("backgroundColor")&&a("#comm").height()>0&&k.randomPuzzle(k.callbackRandom)}})},slider:function(){a(".slider").slider({margin:0,isPlay:!1,lazy:"data-img"});var b={1:"开始游戏",2:"领卡片",3:"确认身份",4:"天黑闭眼",5:"依次阐述",6:"投票",7:"遗言",8:"游戏结束"},c=a("#helper .container"),d=a("#helper .caption");a(document).on("slider",function(a,e){c.animate({opacity:0},500,"ease-out",function(){c.html(JST["view/help-switcher"]({index:e})).animate({opacity:1},600,"ease-out")}),d.animate({translateX:"-300px"},500,"ease-out",function(){d.text(b[e]).animate({translateX:"0px"},600,"ease-out")})})},hideAddrBar:function(){a(document).ready(function(){setTimeout(function(){b.scrollTo(0,-1)},100)})},overlay:function(){l.mask={show:function(){var b=a(".loading");b.hasClass("hide")&&b.removeClass("hide")},hide:function(){var b=a(".loading");b.hasClass("hide")||b.addClass("hide")}}},reset:function(){a.fn.wait=function(a,c){return b.setTimeout(a,1e3*c)},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}},getCookie:function(a){var b,c;return document.cookie.length>0&&(b=document.cookie.indexOf(a+"="),-1!=b)?(b=b+a.length+1,c=document.cookie.indexOf(";",b),-1==c&&(c=document.cookie.length),document.cookie.substring(b,c)):""},setCookie:function(a,b,c){var d=new Date;d.setDate(d.getDate()+c),document.cookie=a+"="+escape(b)+(null==c?"":";expires="+d.toGMTString())},help:function(){a(document).on("tap",".f-l",function(){l._helper.show()})},close:function(){d.on("tap",".close",function(){d.hide(),a("#wrapper footer").height("90px"),a("#wrapper .container").height("240px"),c.show()})}};l._helper={WIDTH_WITH_MARGIN:256,init:function(){l._helper.getEl(),l._helper.setSize(),l._helper.bind(),l._helper.showOnce()},bind:function(){var a=l._helper.$el;a.on("tap",".h-close",function(){l._helper.close()})},setSize:function(){function c(){l._helper.$el.css("width",b.innerWidth),l._helper.$el.find(".sl").css("paddingLeft",(b.innerWidth-l._helper.WIDTH_WITH_MARGIN)/2)}a(b).resize(c),c()},getEl:function(){l._helper.$el=a("#_helper"),l._helper.$el.css({"-webkit-transform":"translateX("+b.innerWidth+"px)","-webkit-transition-duration":0}).hide()},show:function(c){var e=l._helper.$el;d.hide(),e.show(),e.children().length>0?e.show():(e.html(JST["view/helper-new"]()),l._helper.$el.find(".sl").css("paddingLeft",(b.innerWidth-l._helper.WIDTH_WITH_MARGIN)/2),Flipsnap("#_helper .sl",{distance:l._helper.WIDTH_WITH_MARGIN})),c=c||0,setTimeout(function(){e.css({"-webkit-transform":"translateX(0)","-webkit-transition-duration":"300ms"}),a("html,body").css("overflow","hidden")},c)},close:function(){l._helper.$el.css({"-webkit-transform":"translateX("+b.innerWidth+"px)"}),setTimeout(function(){l._helper.$el.hide(),a("html,body").css("overflow","auto")},300);try{localStorage.setItem("help_readed",1)}catch(c){}},showOnce:function(){var a=!1;try{a=!!localStorage.getItem("help_readed")}catch(b){}!a&&l._helper.show(500)}},l._helper.init();var m={statusTick:null,amountTick:null,certificate:{inputRoomId:"",playerId:"",status:""},join:function(b){a.ajax({type:"GET",url:f.join,data:{roomId:m.certificate.inputRoomId,playerId:l.getCookie("playerId")},dataType:"jsonp",success:function(a){a&&"number"==typeof a.code&&b(a)},TimeOut:3e3,error:function(a,b){throw b.indexof(j.TIME_OUT)>-1?Error(j.TIME_OUT):"jsonP Ajax error!"}})},getPlayers:function(b){a.ajax({type:"GET",url:f.getAmount,data:{roomId:m.certificate.inputRoomId,playerId:m.certificate.playerId},dataType:"jsonp",success:function(a){a&&b(a)
},error:function(){throw Error(j.GET_PLAYERS_AJAX_ERROR)}}),m.amountTick=setTimeout(arguments.callee,2e3,b)},getStatus:function(c){a.ajax({type:"GET",url:f.getStatus,data:{roomId:m.certificate.inputRoomId,playerId:m.certificate.playerId},dataType:"jsonp",success:function(a){a&&a.status&&c(a)},error:function(){throw b.clearTimeout(m.statusTick),"getStatus Ajax error!"}}),m.statusTick=setTimeout(arguments.callee,2e3,c)},getPuzzle:function(c){a.ajax({type:"GET",url:f.getPuzzle,data:{playerId:m.certificate.playerId},dataType:"jsonp",success:function(a){a&&a.word&&c(a)},error:function(){throw b.clearTimeout(m.statusTick),"getPuzzle Ajax error!"}})},callbackGetPuzzle:function(c){var d=c.character,e=a(".paper");if(b.clearTimeout(m.statusTick),b.clearTimeout(m.amountTick),d==g.ONI)e.addClass("oni").find("label").text(c.word);else if(d==g.PEOPLE)e.addClass("common").find("label").text(c.word);else{if(d!=g.IDIOT)throw Error(j.GET_PUZZLE_ROLE_ERROR);e.addClass("common").find("label").text(c.word)}a("header h1").text("游戏开始")},callbackGetStatus:function(a){return a.status==h.IDLE?(alert("你已经和大家失去了联系!"),b.clearTimeout(m.statusTick),void 0):(a.status==h.GAME&&m.getPuzzle(m.callbackGetPuzzle),void 0)},callbackJoin:function(b){if(0==b.code){m.certificate.playerId=b.playerId,l.setCookie("playerId",b.playerId);var c='<div>                                    <h1>                                    等待出题                                    </h1>                                </div>                                <div>                                    <span class="room">                                    135房间                                    </span>                                </div>                                <span class="replay">                                </span>',d='<div id="" class="box">                                <span class="arrow"></span>                                <span class="clip">                                    <span class="paper"><label>出题中</label></span>                                </span>                            </div>                            <div class="roomStatus">                            </div>';a("header").html(c).find(".room").text(m.certificate.inputRoomId+"房间"),a(".container").html(d),a(".f-r-1").addClass("f-r-2").removeClass("f-r-1"),n.init(),m.getPlayers(m.callbackGetPlayers),m.getStatus(m.callbackGetStatus)}else alert(i[b.reason]);l.mask.hide()},callbackGetPlayers:function(b){var c=b.playerAmount?b.playerAmount-1:0;a(".roomStatus").text(c+"人已经加入了房间")},init:function(){a(document).on("tap",".down .r",function(){var c='<div id="popup">                                <div class="grp">                                    <input id="roomId" type="tel" placeholder="请输入房间号">                                    <button id="join">完成</button>                                </div>                            </div>',d=a("#popup");d.length>0?d.show().wait(function(){a("#roomId").focus()},1e3):a(c).appendTo("body").wait(function(){a("#roomId").focus()},1e3),a(document).on("tap","header .replay",function(){b.clearTimeout(m.statusTick),b.clearTimeout(m.amountTick),b.location.reload()})}),a(document).on("tap","#join",function(){a(this).focus(),m.certificate.inputRoomId=a("#roomId").val(),a("#popup").hide(),l.mask.show(),m.join(m.callbackJoin)}),a(document).on("tap","#popup",function(b){b.target===this&&a(this).hide()})}},n={gestureInfo:{originX:0,originY:0,offsetY:0},targetInfo:{$box:null,$popup:null},init:function(){n.targetInfo.$box=a(".box")[0],n.targetInfo.$popup=a(".paper")[0],a(document).on("touchstart",".box",n.onTouchStart),a(document).on("touchmove",".box",n.onTouchMove),a(document).on("touchend",".box",n.onTouchEnd),document.ontouchstart=function(a){a.preventDefault()}},onTouchStart:function(a){n.gestureInfo.originX=a.touches[0].pageX,n.gestureInfo.originY=a.touches[0].pageY},onTouchMove:function(a){var b=a.touches[0].pageY-n.gestureInfo.originY,c=(parseInt(n.targetInfo.$popup.style.height.toString())||0)-b,d=-(c-18)-35;n.gestureInfo.offsetY=b,c>=18&&120>=c&&(n.targetInfo.$popup.style.webkitTransform="translateY("+d+"px)")},onTouchEnd:function(){n.gestureInfo.originX=0,n.gestureInfo.originY=0,n.gestureInfo.offsetY<0&&(n.targetInfo.$popup.style.webkitTransform="translateY(-137px)"),n.gestureInfo.offsetY>0&&(n.targetInfo.$popup.style.webkitTransform="translateY(-55px)")}};k.init(),l.init(),m.init()}(Zepto,window);